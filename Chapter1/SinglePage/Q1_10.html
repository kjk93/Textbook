<!DOCTYPE html>
<html>
	<meta charset="utf-8">
	<head>
		<title>Question 1.10</title>
		<script type="text/javascript">
		function sumNumbers(){
			var triNumbers = [];

			for(j = 1; j <= 1000; j++){
				var pos = triNumbers.length - 1;
				var sums = [];
					//create the sums
					while(j > triNumbers[triNumbers.length - 1] || triNumbers.length == 0){
						triNumbers = addTriangle(triNumbers);
						pos++;
					}

					var currentNum = triNumbers[pos];
					var dif;
					var second = true;
						
					if(currentNum == j){
						sums.push(currentNum);
						
						second = false;
					}
					else{
						var flag = true;
						while(flag){//looking for 2 numbers to add together
							if(pos < 0){
								flag = false;
							}
							currentNum = triNumbers[pos];
						
							dif = j - currentNum;

							if(dif > 0 && dif <= currentNum){
								var check = true;
								var i = 0;
								while(check){
									
									if(triNumbers[i] == dif){
										
										sums.push(currentNum);
										
										sums.push(triNumbers[i]);
										check = false;
										flag = false;
										second = false;
									}
									else if(triNumbers[i] > dif){
										
										check = false;
										pos--;
									}
									else{
										i++;
									
									}
								}
							}
							else if(dif > currentNum){//exit this loop
								dif = j - triNumbers[pos +1];
								sums.push(triNumbers[pos + 1]);
								flag = false;
							}
							else if(dif == 0){//end process, solution found
								flag = false;
								second = false;						
								sums.push(currentNum);
							}
							else{//dif negative						
								pos--;
							}
						}
					}

					if(second){
						var count = 0;
						var firstDif = dif;
						var flag = true;
						pos = triNumbers.length - 1;
						while(flag){					
							currentNum = triNumbers[pos];					
							dif = firstDif - currentNum;								
							var check = true;
							var i = 0;
							while(check){						
								if(triNumbers[i] == dif){							
									sums.push(currentNum);							
									sums.push(triNumbers[i]);
									check = false;
									flag = false;
								}
								else if(triNumbers[i] > dif){					
									pos--;
									check = false;
								}
								else{
									i++;
									count++;							
									if(count > 500){							
										check = false;
										flag = false;
									}
								}
							}
						}
					}
				document.write(printAdds(sums, j) + "<br/>");
			}
		}

		function addTriangle(array){
			if(array.length == 0){
				array.push(1);
			}
			else{
				var toAdd;
				toAdd = array[array.length - 1] + (array.length + 1);
				array.push(toAdd);
			}
			return array;
		}

		function printAdds(nums, sol){
			var addsString = "";
			for(var i = 0; i < nums.length; i++){
				if(i < nums.length - 1){
					addsString = addsString + nums[i] + " + ";
				}
				else{
					addsString = addsString + nums[i];
				}
			}
			addsString = addsString + " = " + sol;
			return addsString;
		}
		</script>
	</head>
	<body onload="sumNumbers()">
		<h1>Numbers 1 through 1000 is triangle number sums</h1><br/>
	</body>
</html>